(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},37:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o,a,l=t(0),r=t.n(l),c=t(13),i=t.n(c),u=t(14),s=t(3),f=function(e){return o=null==typeof e.filterValue?"":e.filterValue,a=null==typeof e.handleFilterChange?"":e.handleFilterChange,r.a.createElement("div",{style:{padding:10}},"Filtteri: ",r.a.createElement("input",{value:o,onChange:a}))},d=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("li",null,n.name,","," ",n.number," "," ",r.a.createElement("button",{onClick:t},"Poista"))},m=t(2),h=t.n(m),g=function(e){var n=String(e);if(console.log("Deleting person",n),window.confirm("Haluatko varmasti poistaa henkil\xf6n?"))return console.log("Deleting person ",n),h.a.delete("".concat("/api/persons","/").concat(n)).then(function(e){return e.data}).catch(function(e){alert("The person '".concat(n,"' was already deleted from server"))})},p=function(e){return console.log("Filtered rows propsit: ",e),console.log(e.filteredRows),e.filteredRows.filter(function(n){return n.name.toLowerCase().includes(e.filterValue.toLowerCase())}).map(function(n){return console.log(n.name,n.id),r.a.createElement(d,{key:n.id,person:n,deletePerson:function(){return e.deletePerson(n.id)}})})},v=function(e){return r.a.createElement("form",{onSubmit:e.addPersonAndNumber},r.a.createElement("div",{style:{padding:10}},"Nimi: ",r.a.createElement("input",{value:e.newName,onChange:e.handlePersonsChange})),r.a.createElement("div",{style:{padding:10}},"Puhelinnumero: ",r.a.createElement("input",{value:e.newPhone,onChange:e.handlePhoneChange})),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Lis\xe4\xe4")))},E=function(){return h.a.get("/api/persons").then(function(e){return e.data})},b=function(e){return h.a.post("/api/persons",e).then(function(e){return e.data})},w=function(e,n){return console.log("ID: ",e),h.a.put("".concat("/api/persons","/").concat(e),n).then(function(e){return e.data})},P=function(e){var n=e.message,t=e.isSuccess,o="green";return console.log("Message",n),console.log("Success ",t.toString()),null===n?null:(t?t&&(o="green",console.log("Success")):(o="red",console.log("No success")),r.a.createElement("div",{className:"error",style:{color:o}},n))},k=(t(37),function(){var e=Object(l.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],a=Object(l.useState)(""),c=Object(s.a)(a,2),i=c[0],d=c[1],m=Object(l.useState)(""),h=Object(s.a)(m,2),k=h[0],j=h[1],C=Object(l.useState)(""),O=Object(s.a)(C,2),S=O[0],y=O[1],N=Object(l.useState)(null),F=Object(s.a)(N,2),H=F[0],L=F[1],D=Object(l.useState)(!0),V=Object(s.a)(D,2),R=V[0],A=V[1],I=t,J="/api/persons";Object(l.useEffect)(function(){E().then(function(e){console.log("Promise fulfilled"),console.log(e),o(e)})},[]);function T(e){L("".concat(e)),setTimeout(function(){L(null)},5e3)}return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(P,{message:H,isSuccess:R}),r.a.createElement("h3",null,"Hae henkil\xf6\xe4"),r.a.createElement(f,{filterValue:S,handleFilterChange:function(e){y(e.target.value)}}),r.a.createElement("h3",null,"Lis\xe4\xe4 henkil\xf6"),r.a.createElement(v,{addPersonAndNumber:function(e){if(e.preventDefault(),t.filter(function(e){return e.name.toLowerCase()===i.toLowerCase()}).length>0)window.confirm("Henkil\xf6 ".concat(i," on jo olemassa. P\xe4ivitet\xe4\xe4nk\xf6 numero?"))&&function(){var e=i,n=t.find(function(n){return n.name===e}),a=n.id;"".concat(J).concat(a),console.log(n);var l=Object(u.a)({},n,{number:k});console.log(l),w(a,l).then(function(n){A(!0),o(t.map(function(e){return e.id!==a?e:n})),d(""),j(""),T("Henkil\xf6n ".concat(e," numero p\xe4ivitetty."))}).catch(function(n){A(!1),T("Henkil\xf6 ".concat(e," on poistettu palvelimelta. :( Kokeile lis\xe4t\xe4 henkil\xf6 uudelleen!")),o(t.filter(function(e){return e.id!==a}))})}();else{var n={name:i,number:k};b(n).then(function(e){n.id=e.id,A(!0),o(t.concat(n)),d(""),j(""),T("Henkil\xf6 ".concat(n.name," lis\xe4tty"))})}},newName:i,handlePersonsChange:function(e){d(e.target.value)},newPhone:k,handlePhoneChange:function(e){j(e.target.value)}}),r.a.createElement("h2",null,"Numerot"),r.a.createElement("ul",null,r.a.createElement(p,{filterValue:S,filteredRows:I,deletePerson:function(e){A(!0),console.log("Front: Deleting person with id: ",e);var n=t.find(function(n){return n.id===e}).name;g(e).then(o(t.filter(function(n){return n.id!==e}))),T("Poistettiin henkil\xf6 ".concat(n))}})))});t(38);i.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ca734bcb.chunk.js.map