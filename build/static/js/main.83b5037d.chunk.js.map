{"version":3,"sources":["components/Filter.js","components/Person.js","services/deleteData.js","components/PersonsList.js","components/Inputs.js","services/getData.js","services/addData.js","services/updateData.js","components/Notification.js","App.js","index.js"],"names":["filterValue","handleFilterChange","Filter","filter","react_default","a","createElement","style","padding","value","onChange","Person","_ref","person","deletePerson","name","number","onClick","deleteData","id","strId","String","console","log","window","confirm","axios","delete","concat","then","response","data","catch","error","alert","PersonsList","props","filteredRows","toLowerCase","includes","map","filteredPerson","components_Person","key","Inputs","inputs","onSubmit","addPersonAndNumber","newName","handlePersonsChange","newPhone","handlePhoneChange","type","getAll","get","addData","newObject","post","updateData","put","Notification","message","isSuccess","color","toString","className","App","_useState","useState","_useState2","Object","slicedToArray","personsList","setPersonsList","_useState3","_useState4","setName","_useState5","_useState6","setPhone","_useState7","_useState8","setFilter","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","setSuccess","baseUrl","useEffect","initialPersons","throwMessage","errorParam","setTimeout","components_Notification","components_Filter","event","target","components_Inputs","preventDefault","length","personToUpdate","find","changedPerson","objectSpread","updatePerson","personObject","components_PersonsList","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.83b5037d.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n\r\nlet filterValue;\r\nlet handleFilterChange;\r\n\r\nconst Filter = ( filter ) =>\r\n{\r\n\r\n    if ( typeof filter.filterValue == null )\r\n    {\r\n        filterValue = ''\r\n    } else\r\n    {\r\n        filterValue = filter.filterValue\r\n    }\r\n\r\n    if ( typeof filter.handleFilterChange == null )\r\n    {\r\n        handleFilterChange = ''\r\n    } else\r\n    {\r\n        handleFilterChange = filter.handleFilterChange\r\n    }\r\n\r\n    return (\r\n        <div style={ { padding: 10 } }>\r\n            Filtteri: <input value={ filterValue } onChange={ handleFilterChange } />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter ","import React from 'react'\r\n\r\nconst Person = ({person, deletePerson}) =>\r\n{\r\n  const label = 'Poista'\r\n  const space = ' '\r\n  const comma = ','\r\n  return (\r\n    <li>\r\n      {person.name}{comma} {person.number} {space}\r\n      <button onClick={deletePerson}>{label}</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Person","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst deleteData = id =>\r\n{\r\n    const strId = String(id)\r\n    console.log('Deleting person', strId)\r\n    if (window.confirm('Haluatko varmasti poistaa henkilön?'))\r\n    {\r\n        console.log('Deleting person ', strId)\r\n        const request = axios.delete(`${baseUrl}/${strId}`)\r\n        return request\r\n            .then(response => response.data)\r\n            .catch(error =>\r\n            {\r\n                alert(\r\n                    `The person '${strId}' was already deleted from server`\r\n                )\r\n            })\r\n    }\r\n}\r\n\r\nexport default deleteData","import React from 'react'\r\nimport Person from './Person'\r\nimport Filter from './Filter'\r\nimport deleteData from '../services/deleteData'\r\n\r\n\r\n//TOIMII - ÄLÄ KOSKE\r\nconst PersonsList = (props) =>\r\n{\r\n    console.log('Filtered rows propsit: ', props)\r\n    console.log(props.filteredRows)\r\n    return props.filteredRows.filter(person =>\r\n\r\n        person.name.toLowerCase().includes(props.filterValue.toLowerCase())).map(filteredPerson =>\r\n        {\r\n            console.log(filteredPerson.name, filteredPerson.id)\r\n            return (\r\n                //Komponentti\r\n                <Person\r\n                    //Tämän perusteella komponentit erotellaan arrayssa\r\n                    key={filteredPerson.id}\r\n\r\n                    //Tämä sisältö näytetään\r\n                    person={filteredPerson}\r\n\r\n                    //Rekisteröidään nappula id:n avulla tälle objektille\r\n                    deletePerson={() => props.deletePerson(filteredPerson.id)}\r\n                />\r\n            )\r\n        })\r\n}\r\n\r\nexport default PersonsList","import React from 'react'\r\n\r\nconst Inputs = ( inputs ) =>\r\n{\r\n\r\n    return (\r\n        <form onSubmit={ inputs.addPersonAndNumber }>\r\n            <div style={ { padding: 10 } }>\r\n                Nimi: <input value={ inputs.newName } onChange={ inputs.handlePersonsChange } />\r\n            </div>\r\n            <div style={ { padding: 10 } }>\r\n                Puhelinnumero: <input value={ inputs.newPhone } onChange={ inputs.handlePhoneChange } />\r\n            </div>\r\n            <div>\r\n                <br></br>\r\n                <button type=\"submit\">Lisää</button>\r\n            </div>\r\n        </form>\r\n    )\r\n\r\n}\r\n\r\nexport default Inputs ","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () =>\r\n{\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default getAll","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst addData = newObject =>\r\n{\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default addData","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst updateData = (id, newObject) =>\r\n{\r\n    console.log(\"ID: \", id)\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default updateData","import React, { useState } from 'react'\r\n\r\nconst Notification = ( { message, isSuccess } ) =>\r\n{\r\n\r\n    var color = 'green'\r\n    console.log( 'Message', message )\r\n    console.log( 'Success ', isSuccess.toString() )\r\n\r\n\r\n    if ( message === null )\r\n    {\r\n        return null\r\n    }\r\n\r\n\r\n    if ( !isSuccess )\r\n    {\r\n        color = 'red'\r\n        console.log( \"No success\" )\r\n    } else if ( isSuccess )\r\n    {\r\n        color = 'green'\r\n        console.log( \"Success\" )\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\" style={ { color: color } }>\r\n            { message }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification\r\n\r\n\r\n//style = { { width: 150, height: 90 } }","import React, {useState, useEffect} from 'react'\r\n\r\nimport Filter from './components/Filter'\r\nimport PersonsList from './components/PersonsList'\r\nimport Inputs from './components/Inputs'\r\nimport getAll from './services/getData'\r\nimport addData from './services/addData'\r\nimport deleteData from './services/deleteData'\r\nimport updateData from './services/updateData'\r\nimport Notification from './components/Notification'\r\n\r\nimport './App.css';\r\n\r\nconst App = () =>\r\n{\r\n    // Tilamuuttujat\r\n    const [personsList, setPersonsList] = useState([])\r\n    const [newName, setName] = useState('')\r\n    const [newPhone, setPhone] = useState('')\r\n    const [filterValue, setFilter] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [isSuccess, setSuccess] = useState(true)\r\n\r\n    const filteredRows = personsList\r\n    const baseUrl = '/api/persons'\r\n\r\n\r\n    //Efekti, jolla noudetaan henkilölista ja asetetaan se tilamuuttujaan\r\n    const hook = () =>\r\n    {\r\n        getAll()\r\n            .then(initialPersons =>\r\n            {\r\n                console.log('Promise fulfilled')\r\n                console.log(initialPersons)\r\n                setPersonsList(initialPersons)\r\n            })\r\n    }\r\n\r\n    useEffect(hook, [])\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const handlePersonsChange = (event) =>\r\n    {\r\n        setName(event.target.value)\r\n    }\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const handlePhoneChange = (event) =>\r\n    {\r\n        setPhone(event.target.value)\r\n    }\r\n\r\n    //TOIMII - ÄLÄ KOSKE\r\n    const handleFilterChange = (event) =>\r\n    {\r\n        setFilter(event.target.value)\r\n    }\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const addOrUpdatePerson = (event) =>\r\n    {\r\n        event.preventDefault()\r\n\r\n        if (personsList.filter(person => person.name.toLowerCase() === newName.toLowerCase()).length > 0)\r\n        {\r\n            if (window.confirm(`Henkilö ${newName} on jo olemassa. Päivitetäänkö numero?`))\r\n            {\r\n                updatePerson()\r\n            }\r\n        } else\r\n        {\r\n            const personObject = {\r\n                name: newName,\r\n                number: newPhone\r\n            }\r\n            addData(personObject)\r\n                .then(response =>\r\n                {\r\n                    setSuccess(true)\r\n                    setPersonsList(personsList.concat(personObject))\r\n                    setName('')\r\n                    setPhone('')\r\n                    throwMessage(`Henkilö ${personObject.name} lisätty`)\r\n                })\r\n        }\r\n    }\r\n\r\n    function updatePerson()\r\n    {\r\n        const name = newName\r\n\r\n        const personToUpdate = personsList.find(person => person.name === name)\r\n        const id = personToUpdate.id\r\n\r\n        const url = `${baseUrl}${id}`\r\n\r\n        console.log(personToUpdate)\r\n        const changedPerson = {...personToUpdate, number: newPhone}\r\n        console.log(changedPerson)\r\n        updateData(id, changedPerson)\r\n            .then(changedPerson =>\r\n            {\r\n                setSuccess(true)\r\n                setPersonsList(personsList.map(person => person.id !== id ? person : changedPerson))\r\n                setName('')\r\n                setPhone('')\r\n                throwMessage(`Henkilön ${name} numero päivitetty.`)\r\n            })\r\n            .catch(error =>\r\n            {\r\n                setSuccess(false)\r\n                throwMessage(`Henkilö ${name} on poistettu palvelimelta. :( Kokeile lisätä henkilö uudelleen!`)\r\n                setPersonsList(personsList.filter(person => person.id !== id))\r\n            })\r\n    }\r\n\r\n    function deletePerson(id)\r\n    {\r\n        setSuccess(true)\r\n        console.log('Front: Deleting person with id: ', id)\r\n        const personToDelete = personsList.find(person => person.id === id)\r\n        const name = personToDelete.name\r\n\r\n        deleteData(id)\r\n            .then(setPersonsList(personsList.filter(person => person.id !== id)))\r\n\r\n        throwMessage(`Poistettiin henkilö ${name}`)\r\n    }\r\n\r\n    function throwMessage(errorParam)\r\n    {\r\n        setErrorMessage(\r\n            (`${errorParam}`)\r\n        )\r\n        setTimeout(() =>\r\n        {\r\n            setErrorMessage(null)\r\n        }, 5000)\r\n\r\n    }\r\n\r\n\r\n    // Refaktoroi komponentit omiin tiedostoihin\r\n    return (\r\n        <div>\r\n            <h2>Puhelinluettelo</h2>\r\n            <Notification\r\n                message={errorMessage}\r\n                isSuccess={isSuccess}\r\n            />\r\n\r\n            <h3>Hae henkilöä</h3>\r\n            <Filter\r\n                filterValue={filterValue}\r\n                handleFilterChange={handleFilterChange}\r\n            />\r\n            <h3>Lisää henkilö</h3>\r\n            <Inputs\r\n                addPersonAndNumber={addOrUpdatePerson}\r\n                newName={newName}\r\n                handlePersonsChange={handlePersonsChange}\r\n                newPhone={newPhone}\r\n                handlePhoneChange={handlePhoneChange}\r\n            />\r\n            <h2>Numerot</h2>\r\n            <ul>\r\n                <PersonsList\r\n                    filterValue={filterValue}\r\n                    filteredRows={filteredRows}\r\n                    deletePerson={deletePerson}\r\n                />\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App\r\n\r\n\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render( <App />, document.getElementById( 'root' ) )"],"sourceRoot":""}