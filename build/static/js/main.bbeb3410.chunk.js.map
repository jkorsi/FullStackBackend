{"version":3,"sources":["components/Filter.js","components/Person.js","services/deleteData.js","components/PersonsList.js","components/Inputs.js","services/getData.js","services/addData.js","services/updateData.js","components/Notification.js","App.js","index.js"],"names":["filterValue","handleFilterChange","Filter","filter","react_default","a","createElement","style","padding","value","onChange","Person","_ref","person","deletePerson","name","number","onClick","deleteData","id","strId","String","console","log","window","confirm","axios","delete","concat","then","response","data","catch","error","alert","PersonsList","props","lowerCaseFilter","filteredRows","toLowerCase","includes","map","filteredPerson","components_Person","key","Inputs","inputs","onSubmit","addPersonAndNumber","newName","handlePersonsChange","newPhone","handlePhoneChange","type","getAll","get","addData","newObject","post","updateData","put","Notification","message","isSuccess","color","toString","className","App","_useState","useState","_useState2","Object","slicedToArray","personsList","setPersonsList","_useState3","_useState4","setName","_useState5","_useState6","setPhone","_useState7","_useState8","setFilter","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","setSuccess","baseUrl","useEffect","initialPersons","throwMessage","errorParam","setTimeout","components_Notification","components_Filter","event","target","components_Inputs","preventDefault","length","personToUpdate","find","changedPerson","objectSpread","updatePerson","personObject","components_PersonsList","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.bbeb3410.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n\r\nlet filterValue;\r\nlet handleFilterChange;\r\n\r\nconst Filter = ( filter ) =>\r\n{\r\n\r\n    if ( typeof filter.filterValue == null )\r\n    {\r\n        filterValue = ''\r\n    } else\r\n    {\r\n        filterValue = filter.filterValue\r\n    }\r\n\r\n    if ( typeof filter.handleFilterChange == null )\r\n    {\r\n        handleFilterChange = ''\r\n    } else\r\n    {\r\n        handleFilterChange = filter.handleFilterChange\r\n    }\r\n\r\n    return (\r\n        <div style={ { padding: 10 } }>\r\n            Filtteri: <input value={ filterValue } onChange={ handleFilterChange } />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter ","import React from 'react'\r\n\r\nconst Person = ({person, deletePerson}) =>\r\n{\r\n  const label = 'Poista'\r\n  const space = ' '\r\n  const comma = ','\r\n  return (\r\n    <li>\r\n      {person.name}{comma} {person.number} {space}\r\n      <button onClick={deletePerson}>{label}</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Person","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst deleteData = id =>\r\n{\r\n    const strId = String(id)\r\n    console.log('Deleting person', strId)\r\n    if (window.confirm('Haluatko varmasti poistaa henkilön?'))\r\n    {\r\n        console.log('Deleting person ', strId)\r\n        const request = axios.delete(`${baseUrl}/${strId}`)\r\n        return request\r\n            .then(response => response.data)\r\n            .catch(error =>\r\n            {\r\n                alert(\r\n                    `The person '${strId}' was already deleted from server`\r\n                )\r\n            })\r\n    }\r\n}\r\n\r\nexport default deleteData","import React from 'react'\r\nimport Person from './Person'\r\nimport Filter from './Filter'\r\nimport deleteData from '../services/deleteData'\r\n\r\n\r\n//TOIMII - ÄLÄ KOSKE\r\nconst PersonsList = (props) =>\r\n{\r\n    console.log('Filtered rows propsit: ', props)\r\n    console.log(props.filteredRows)\r\n    let lowerCaseFilter\r\n    if (props.filterValue)\r\n    {\r\n        lowerCaseFilter = props.filterValue.toLowerCase\r\n    }\r\n    else\r\n    {\r\n        lowerCaseFilter = \"\"\r\n    }\r\n    return props.filteredRows.filter(person =>\r\n\r\n        person.name.toLowerCase().includes(lowerCaseFilter)).map(filteredPerson =>\r\n        {\r\n            console.log(\"Filtered values: \", filteredPerson.name, filteredPerson.id)\r\n            return (\r\n                //Komponentti\r\n                <Person\r\n                    //Tämän perusteella komponentit erotellaan arrayssa\r\n                    key={filteredPerson.id}\r\n\r\n                    //Tämä sisältö näytetään\r\n                    person={filteredPerson}\r\n\r\n                    //Rekisteröidään nappula id:n avulla tälle objektille\r\n                    deletePerson={() => props.deletePerson(filteredPerson.id)}\r\n                />\r\n            )\r\n        })\r\n}\r\n\r\nexport default PersonsList","import React from 'react'\r\n\r\nconst Inputs = ( inputs ) =>\r\n{\r\n\r\n    return (\r\n        <form onSubmit={ inputs.addPersonAndNumber }>\r\n            <div style={ { padding: 10 } }>\r\n                Nimi: <input value={ inputs.newName } onChange={ inputs.handlePersonsChange } />\r\n            </div>\r\n            <div style={ { padding: 10 } }>\r\n                Puhelinnumero: <input value={ inputs.newPhone } onChange={ inputs.handlePhoneChange } />\r\n            </div>\r\n            <div>\r\n                <br></br>\r\n                <button type=\"submit\">Lisää</button>\r\n            </div>\r\n        </form>\r\n    )\r\n\r\n}\r\n\r\nexport default Inputs ","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () =>\r\n{\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default getAll","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst addData = newObject =>\r\n{\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default addData","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst updateData = (id, newObject) =>\r\n{\r\n    const strId = String(id)\r\n    console.log(\"ID: \", strId)\r\n    const request = axios.put(`${baseUrl}/${strId}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default updateData","import React, { useState } from 'react'\r\n\r\nconst Notification = ( { message, isSuccess } ) =>\r\n{\r\n\r\n    var color = 'green'\r\n    console.log( 'Message', message )\r\n    console.log( 'Success ', isSuccess.toString() )\r\n\r\n\r\n    if ( message === null )\r\n    {\r\n        return null\r\n    }\r\n\r\n\r\n    if ( !isSuccess )\r\n    {\r\n        color = 'red'\r\n        console.log( \"No success\" )\r\n    } else if ( isSuccess )\r\n    {\r\n        color = 'green'\r\n        console.log( \"Success\" )\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\" style={ { color: color } }>\r\n            { message }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification\r\n\r\n\r\n//style = { { width: 150, height: 90 } }","import React, {useState, useEffect} from 'react'\r\n\r\nimport Filter from './components/Filter'\r\nimport PersonsList from './components/PersonsList'\r\nimport Inputs from './components/Inputs'\r\nimport getAll from './services/getData'\r\nimport addData from './services/addData'\r\nimport deleteData from './services/deleteData'\r\nimport updateData from './services/updateData'\r\nimport Notification from './components/Notification'\r\n\r\nimport './App.css';\r\n\r\nconst App = () =>\r\n{\r\n    // Tilamuuttujat\r\n    const [personsList, setPersonsList] = useState([])\r\n    const [newName, setName] = useState('')\r\n    const [newPhone, setPhone] = useState('')\r\n    const [filterValue, setFilter] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [isSuccess, setSuccess] = useState(true)\r\n\r\n    const filteredRows = personsList\r\n    const baseUrl = '/api/persons/'\r\n\r\n\r\n    //Efekti, jolla noudetaan henkilölista ja asetetaan se tilamuuttujaan\r\n    const hook = () =>\r\n    {\r\n        getAll()\r\n            .then(initialPersons =>\r\n            {\r\n                console.log('Promise fulfilled')\r\n                console.log(initialPersons)\r\n                setPersonsList(initialPersons)\r\n            })\r\n    }\r\n\r\n    useEffect(hook, [])\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const handlePersonsChange = (event) =>\r\n    {\r\n        setName(event.target.value)\r\n    }\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const handlePhoneChange = (event) =>\r\n    {\r\n        setPhone(event.target.value)\r\n    }\r\n\r\n    //TOIMII - ÄLÄ KOSKE\r\n    const handleFilterChange = (event) =>\r\n    {\r\n        setFilter(event.target.value)\r\n    }\r\n\r\n    // TOIMII - ÄLÄ KOSKE \r\n    const addOrUpdatePerson = (event) =>\r\n    {\r\n        event.preventDefault()\r\n        console.log(\"New name\", newName, \", new number: \", newPhone)\r\n\r\n        if (personsList.filter(person => person.name.toLowerCase() === newName.toLowerCase()).length > 0)\r\n        {\r\n            if (window.confirm(`Henkilö ${newName} on jo olemassa. Päivitetäänkö numero?`))\r\n            {\r\n                updatePerson()\r\n            }\r\n        } else\r\n        {\r\n            const personObject = {\r\n                name: newName,\r\n                number: newPhone\r\n            }\r\n            addData(personObject)\r\n                .then(response =>\r\n                {\r\n                    personObject.id = response.id\r\n                    setSuccess(true)\r\n                    setPersonsList(personsList.concat(personObject))\r\n                    setName('')\r\n                    setPhone('')\r\n                    throwMessage(`Henkilö ${personObject.name} lisätty`)\r\n                })\r\n        }\r\n    }\r\n\r\n    function updatePerson()\r\n    {\r\n        const name = newName\r\n\r\n        const personToUpdate = personsList.find(person => person.name === name)\r\n        const id = personToUpdate.id\r\n\r\n        const url = `${baseUrl}${id}`\r\n\r\n        console.log(personToUpdate)\r\n        const changedPerson = {...personToUpdate, number: newPhone}\r\n        console.log(changedPerson)\r\n        updateData(id, changedPerson)\r\n            .then(changedPerson =>\r\n            {\r\n                setSuccess(true)\r\n                setPersonsList(personsList.map(person => person.id !== id ? person : changedPerson))\r\n                setName('')\r\n                setPhone('')\r\n                throwMessage(`Henkilön ${name} numero päivitetty.`)\r\n            })\r\n            .catch(error =>\r\n            {\r\n                setSuccess(false)\r\n                throwMessage(`Henkilö ${name} on poistettu palvelimelta. :( Kokeile lisätä henkilö uudelleen!`)\r\n                setPersonsList(personsList.filter(person => person.id !== id))\r\n            })\r\n    }\r\n\r\n    function deletePerson(id)\r\n    {\r\n        setSuccess(true)\r\n        console.log('Front: Deleting person with id: ', id)\r\n        const personToDelete = personsList.find(person => person.id === id)\r\n        const name = personToDelete.name\r\n\r\n        deleteData(id)\r\n            .then(setPersonsList(personsList.filter(person => person.id !== id)))\r\n\r\n        throwMessage(`Poistettiin henkilö ${name}`)\r\n    }\r\n\r\n    function throwMessage(errorParam)\r\n    {\r\n        setErrorMessage(\r\n            (`${errorParam}`)\r\n        )\r\n        setTimeout(() =>\r\n        {\r\n            setErrorMessage(null)\r\n        }, 5000)\r\n\r\n    }\r\n\r\n\r\n    // Refaktoroi komponentit omiin tiedostoihin\r\n    return (\r\n        <div>\r\n            <h2>Puhelinluettelo</h2>\r\n            <Notification\r\n                message={errorMessage}\r\n                isSuccess={isSuccess}\r\n            />\r\n\r\n            <h3>Hae henkilöä</h3>\r\n            <Filter\r\n                filterValue={filterValue}\r\n                handleFilterChange={handleFilterChange}\r\n            />\r\n            <h3>Lisää henkilö</h3>\r\n            <Inputs\r\n                addPersonAndNumber={addOrUpdatePerson}\r\n                newName={newName}\r\n                handlePersonsChange={handlePersonsChange}\r\n                newPhone={newPhone}\r\n                handlePhoneChange={handlePhoneChange}\r\n            />\r\n            <h2>Numerot</h2>\r\n            <ul>\r\n                <PersonsList\r\n                    filterValue={filterValue}\r\n                    filteredRows={filteredRows}\r\n                    deletePerson={deletePerson}\r\n                />\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App\r\n\r\n\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render( <App />, document.getElementById( 'root' ) )"],"sourceRoot":""}